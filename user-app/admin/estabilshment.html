<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Restaurant Info Dashboard</title>
<style>
  /* Reset styles */
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: Arial, sans-serif;
    background-color: #f0f2f5;
  }

  /* Header with menu icon */
  .header {
    display: flex;
    align-items: center;
    padding: 10px 20px;
    background-color: #fff;
    position: relative;
    border-bottom: 1px solid #ccc;
  }

  /* Menu container and icon */
  .menu-container {
    position: relative;
  }

  .menu-icon {
    font-size: 24px;
    cursor: pointer;
  }

  /* Dropdown menu styles */
  #menuDropdown {
    display: none; /* Hidden by default */
    position: absolute;
    top: 40px;
    left: 0;
    background-color: #fff;
    border: 1px solid #ccc;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    padding: 10px;
    z-index: 1000;
    flex-direction: column;
    gap: 10px;
  }

  #menuDropdown button {
    width: 150px;
    padding: 8px 12px;
    border: none;
    background-color: #f0f0f0;
    border-radius: 4px;
    cursor: pointer;
    text-align: left;
  }

  #menuDropdown button:hover {
    background-color: #ddd;
  }

  /* Top bar styles */
  .top-bar {
    background-color: red;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
  }

  /* Profile section styles */
  .profile-section {
    display: flex;
    align-items: center;
  }

  .profile-picture {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #fff; /* Placeholder for profile image */
    margin-right: 10px;
  }

  .admin-name {
    color: #fff;
    font-weight: bold;
    font-size: 1.2em;
  }

  /* Search and filter container */
  .filter-search-container {
    display: flex;
    align-items: center;
    padding: 10px 20px;
    gap: 10px;
    background-color: #fff;
  }

  /* Select style */
  .filter-dropdown {
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid #ccc;
    font-size: 1em;
  }

  /* Search input style */
  #search-input {
    padding: 8px 12px;
    border-radius: 4px;
    border: 1px solid #ccc;
    font-size: 1em;
    flex: 1;
  }

  /* Container for info boxes */
  #info-container {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  /* Info box styles */
  .info-box {
    display: flex;
    background-color: #fff;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    align-items: flex-start;
    gap: 20px;
    flex-wrap: wrap;
  }

  /* Icon section */
  .icon-section {
    flex-shrink: 0;
    cursor: pointer;
  }

  .icon {
    width: 60px;
    height: 60px;
    background-color: #ccc;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 24px;
    border-radius: 8px;
    transition: background-color 0.3s;
  }

  .icon:hover {
    background-color: #bbb;
  }

  /* Details section */
  .details {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* Editable fields */
  .field {
    font-weight: bold;
    outline: none;
  }

  /* Action links */
  .links {
    margin-top: 10px;
    display: flex;
    gap: 15px;
    align-items: center;
  }

  .hyperlink-red {
    color: red;
    text-decoration: none;
    font-weight: bold;
    cursor: pointer;
    font-size: 1em;
  }
  .hyperlink-red:hover {
    text-decoration: underline;
  }

  /* Remove button style */
  .remove-btn {
    margin-left: 10px;
    padding: 6px 12px;
    background-color: #e74c3c;
    color: #fff;
    border: none;
    border-radius: 4px;
    font-size: 0.9em;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  .remove-btn:hover {
    background-color: #c0392b;
  }

  /* Add button style */
  #add-btn {
    margin: 20px auto;
    padding: 12px 24px;
    background-color: red;
    color: #fff;
    border: none;
    border-radius: 6px;
    font-size: 1em;
    cursor: pointer;
    display: block;
  }
  #add-btn:hover {
    background-color: darkred;
  }
</style>
</head>
<body>

<!-- Header with menu icon -->
<div class="header">
  <div class="menu-container">
    <div class="menu-icon" title="Menu" style="cursor:pointer; font-size:24px;" onclick="toggleMenuDropdown()">â˜°</div>
    <div id="menuDropdown">
      <button onclick="showSection('dashboard')">Dashboard</button>
      <button onclick="window.location.href='http://127.0.0.1:5500/driver-app/admin/estabilshment.html'">Establishment</button>
      <button onclick="window.location.href='http://127.0.0.1:5500/driver-app/admin/restaurant_menu.html'">Restaurant Menu</button>
      <button onclick="showSection('Driver')">Driver</button>
      <button onclick="showSection('Vendor')">Vendor</button>
    </div>
  </div>
</div>

<!-- Top bar with admin info -->
<div class="top-bar">
  <div class="profile-section">
    <div class="profile-picture"></div>
    <div class="admin-name">Admin Establishment</div>
  </div>
</div>

<!-- Filter/search controls -->
<div class="filter-search-container">
  <select id="establishment-filter" class="filter-dropdown">
    <option value="">Select Establishment</option>
    <option value="Restaurant">Restaurant</option>
    <option value="Cafe">Cafe</option>
    <option value="Bar">Bar</option>
    <option value="Diner">Diner</option>
  </select>
  <input type="text" id="search-input" placeholder="Search..." />
</div>

<!-- Main container for dynamic info boxes -->
<div id="info-container"></div>

<!-- Add button to create new info boxes -->
<button id="add-btn">Add Restaurant Info</button>

<script>
  // Toggle menu dropdown
  function toggleMenuDropdown() {
    const dropdown = document.getElementById('menuDropdown');
    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
  }

  // Close dropdown if clicked outside
  document.addEventListener('click', (e) => {
    const dropdown = document.getElementById('menuDropdown');
    const menuBtn = document.querySelector('.menu-icon');
    if (!dropdown.contains(e.target) && !menuBtn.contains(e.target)) {
      dropdown.style.display = 'none';
    }
  });

  const container = document.getElementById('info-container');
  const addBtn = document.getElementById('add-btn');

  // Function to create an info box
  function createInfoBox() {
    const box = document.createElement('div');
    box.className = 'info-box';

    // Icon section
    const iconSection = document.createElement('div');
    iconSection.className = 'icon-section';

    const iconDiv = document.createElement('div');
    iconDiv.className = 'icon';
    iconDiv.innerHTML = '&#128247;'; // Camera icon
    iconDiv.title = "Click to change image";
    iconDiv.onclick = () => alert('Image click! Implement image change.');
    iconSection.appendChild(iconDiv);

    // Details section
    const detailsDiv = document.createElement('div');
    detailsDiv.className = 'details';

    function createField(label, value) {
      const p = document.createElement('p');
      p.className = 'field';
      p.contentEditable = true;
      p.innerText = label + ': ' + value;
      return p;
    }

    const nameField = createField('Name', 'Sample Restaurant');
    const contactField = createField('Contact', '123-456-7890');
    const websiteField = createField('Website', 'https://example.com');
    const addressField = createField('Address', '123 Main St');

    detailsDiv.appendChild(nameField);
    detailsDiv.appendChild(contactField);
    detailsDiv.appendChild(websiteField);
    detailsDiv.appendChild(addressField);

    // Links
    const linksDiv = document.createElement('div');
    linksDiv.className = 'links';

    const editLink = document.createElement('a');
    editLink.className = 'hyperlink-red';
    editLink.innerText = 'Edit';
    let isEditing = false;
    editLink.onclick = (e) => {
      e.preventDefault();
      isEditing = !isEditing;
      [nameField, contactField, websiteField, addressField].forEach(f => {
        f.contentEditable = isEditing;
        f.style.backgroundColor = isEditing ? '#ffe' : '';
      });
      editLink.innerText = isEditing ? 'Save' : 'Edit';
    };

    const viewLink = document.createElement('a');
    viewLink.className = 'hyperlink-red';
    viewLink.innerText = 'View Menu';
    viewLink.onclick = (e) => {
      e.preventDefault();
      alert('View menu - replace with modal or page navigation.');
    };

    linksDiv.appendChild(editLink);
    linksDiv.appendChild(viewLink);

    // Remove button
    const removeBtn = document.createElement('button');
    removeBtn.className = 'remove-btn';
    removeBtn.innerText = 'Remove';
    removeBtn.onclick = () => {
      container.removeChild(box);
    };

    // Assemble box
    box.appendChild(iconSection);
    box.appendChild(detailsDiv);
    box.appendChild(linksDiv);
    box.appendChild(removeBtn);

    container.appendChild(box);
  }

  // Initialize with one box
  createInfoBox();

  // Add new box on button click
  document.getElementById('add-btn').onclick = () => {
    createInfoBox();
  };

  // Search filter
  document.getElementById('search-input').addEventListener('keydown', (e) => {
    if (e.key === 'Enter') {
      e.preventDefault();
      alert('Searching for: ' + e.target.value);
      // Implement filtering logic here
    }
  });

  // Example: fetch restaurant data from backend
  const { createClient } = window.supabase || {}; // Assuming your setup
  const supabaseUrl = 'https://wbpgmgtoyzlnawvsfeiu.supabase.co';
  const supabaseKey = process.env.SUPABASE_KEY; // Replace with your key
  const supabase = createClient(supabaseUrl, supabaseKey);

  async function fetchRestaurants() {
    const { data, error } = await supabase.from('restaurants').select('*');
    if (error) {
      console.error('Error fetching restaurants:', error);
      return;
    }
    console.log('Restaurants:', data);
    // You can render data here
  }

  // Call fetch on page load
  window.onload = () => {
    fetchRestaurants();
  };
</script>
</body>
</html>