<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Restaurant Info</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f7f7f7;
  color: #222;
}

/* HEADER */
.header {
  display: flex;
  align-items: center;
  padding: 12px;
  background: #fff;
  border-bottom: 1px solid #eee;
}

.header a {
  text-decoration: none;
  color: #000;
  font-size: 18px;
  margin-right: 10px;
}

.hero img {
  width: 100%;
  height: 220px;
  object-fit: cover;
}

.container {
  padding: 15px;
  background: #fff;
}

.restaurant-title {
  font-size: 22px;
  font-weight: bold;
}

.meta {
  font-size: 13px;
  color: #666;
  margin: 6px 0;
}

.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
  padding: 10px 0;
  border-top: 1px solid #eee;
  border-bottom: 1px solid #eee;
}

.info-row a {
  color: red;
  text-decoration: none;
  font-weight: bold;
}

.menu-section {
  margin-top: 20px;
}

.menu-item {
  display: flex;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid #eee;
  cursor: pointer;
}

.checkout-bar {
  position: fixed;
  bottom: 0;
  width: 100%;
  background: red;
  color: #fff;
  text-align: center;
  padding: 15px;
  font-weight: bold;
}

.checkout-bar a {
  color: #fff;
  text-decoration: none;
}

/* FOOD MODAL */
.food-modal {
  display: none;
  position: fixed;
  z-index: 999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.6);
}

.food-modal-content {
  background: #fff;
  margin: 10% auto;
  padding: 20px;
  width: 90%;
  max-width: 400px;
  border-radius: 8px;
}

.food-close-btn {
  float: right;
  font-size: 20px;
  cursor: pointer;
}

.quantity-btn {
  padding: 8px 14px;
  font-size: 16px;
}

.add-more-btn, .exit-btn {
  padding: 10px 15px;
  margin: 5px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.add-more-btn {
  background: red;
  color: #fff;
}

.exit-btn {
  background: #ccc;
}
</style>
</head>

<body>

<!-- HEADER -->
<div class="header">
  <a href="index.html">‚Üê</a>
  <h2>Restaurant Info</h2>
</div>

<!-- HERO -->
<div class="hero">
  <img id="restaurantImage">
</div>

<!-- CONTENT -->
<div class="container">
  <div class="restaurant-title" id="restaurantName"></div>

  <div class="meta">
    ‚≠ê 4.3 ‚Ä¢ ~25 min
  </div>

  <div class="info-row">
    <span>üìç Restaurant Info</span>
    <a id="mapLink" target="_blank">View Map</a>
  </div>

  <div class="info-row">
    <span id="deliveryTime">üöö Deliver in 20 ‚Äì 35 min</span>
    <a href="#" onclick="changeDelivery()">Change</a>
  </div>

  <div class="menu-section" id="menu"></div>
</div>

<!-- CHECKOUT -->
<div class="checkout-bar">
  <a href="my_order.html">Go to My Orders</a>
</div>

<!-- FOOD MODAL -->
<div id="foodModal" class="food-modal">
  <div class="food-modal-content">
    <span class="food-close-btn" onclick="closeFoodModal()">&times;</span>
    <h3 id="foodItemName"></h3>

    <div style="display:flex;justify-content:center;gap:20px;">
      <button class="quantity-btn" onclick="changeQuantity(-1)">-</button>
      <span id="foodQuantity">1</span>
      <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
    </div>

    <div style="margin-top:20px;text-align:center;">
      <button class="add-more-btn" onclick="addItemToOrder()">Add to Order</button>
      <button class="exit-btn" onclick="closeFoodModal()">Exit</button>
    </div>
  </div>
</div>

<script>
/* RESTAURANT DATA */
const restaurantData = {
  "KFC Parow": {
    image: "Images/RS KFC .jpeg",
    map: "https://www.google.com/maps/search/KFC+Parow",
    menu: [
      { name: "Zinger Burger", price: 45 },
      { name: "Streetwise 2", price: 35 }
    ]
  },
  "Sannes Palace": {
    image: "Images/RS PALACE .jpg",
    map: "https://www.google.com/maps/search/Sannes+Palace",
    menu: [
      { name: "Chicken Curry", price: 60 },
      { name: "Beef Stew", price: 70 }
    ]
  },
  "DK Spot & Kota": {
    image: "Images/RS KOTA .jpg",
    map: "https://www.google.com/maps/search/DK+Spot+Kota",
    menu: [
      { name: "Kota Special", price: 25 },
      { name: "Egg Gatsby", price: 35 }
    ]
  }
};

const params = new URLSearchParams(window.location.search);
const restaurantName = params.get("name") || "KFC Parow";
const restaurant = restaurantData[restaurantName];

document.getElementById("restaurantName").innerText = restaurantName;
document.getElementById("restaurantImage").src = restaurant.image;
document.getElementById("mapLink").href = restaurant.map;

/* LOAD MENU */
const menuDiv = document.getElementById("menu");
restaurant.menu.forEach(item => {
  const div = document.createElement("div");
  div.className = "menu-item";
  div.innerHTML = `<span>${item.name}</span><span>R${item.price}</span>`;
  div.onclick = () => openFoodModal(item);
  menuDiv.appendChild(div);
});

/* FOOD MODAL LOGIC */
let selectedItem = null;
let quantity = 1;

function openFoodModal(item) {
  selectedItem = item;
  quantity = 1;
  document.getElementById("foodItemName").innerText = item.name;
  document.getElementById("foodQuantity").innerText = quantity;
  document.getElementById("foodModal").style.display = "block";
}

function closeFoodModal() {
  document.getElementById("foodModal").style.display = "none";
}

function changeQuantity(val) {
  quantity = Math.max(1, quantity + val);
  document.getElementById("foodQuantity").innerText = quantity;
}

function addItemToOrder() {
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.push({
    ...selectedItem,
    restaurant: restaurantName,
    qty: quantity
  });
  localStorage.setItem("cart", JSON.stringify(cart));
  closeFoodModal();
}

/* DELIVERY TIME */
function changeDelivery() {
  const times = ["15 ‚Äì 25 min", "20 ‚Äì 35 min", "30 ‚Äì 45 min"];
  document.getElementById("deliveryTime").innerText =
    "üöö Deliver in " + times[Math.floor(Math.random() * times.length)];
}
</script>

<!-- EXISTING SCRIPTS (UNCHANGED) -->
<script src="server/supabase/supabaseClient.js" async></script>
<script src="smsAndEmailAPI.js" async></script>
<script src="client/public/functions/mainTwilioFunction.js" async></script>
<script src="client/public/functions/token.js" async></script>
<script src="client/public/functions/sendSMS.js" async></script>
<script src="client/public/functions/twilio.js" async></script>
<script src="client/public/functions/map.js" async></script>
<script src="client/public/functions/payfast.js" async></script>
<script src="client/public/functions/notification.js" async></script>
<script src="client/public/functions/mapFunctions.js" async></script>

</body>
</html>


