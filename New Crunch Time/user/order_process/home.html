<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Home Dashboard</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #f9f9f9;
    }
    .header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 20px;
        background-color: #fff;
        border-bottom: 1px solid #ddd;
    }
    .header button {
        background: none;
        border: none;
        font-size: 16px;
        cursor: pointer;
        padding: 5px 10px;
    }
    .header .search-bar {
        flex-grow: 1;
        margin: 0 10px;
    }
    .header .search-bar input {
        width: 100%;
        padding: 5px;
        border: 1px solid #ddd;
        border-radius: 5px;
    }
    .filters {
        display: flex;
        justify-content: space-between;
        padding: 10px 20px;
        background-color: #ffb4b4;
        border-bottom: 1px solid #ddd;
    }
    .filters button {
        background: none;
        border: none;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        align-items: center;
    }
    .filters button img {
        width: 24px;
        height: 24px;
        margin-bottom: 5px;
    }
    .restaurant-list {
        padding: 10px 20px;
        max-height: 70vh;
        overflow-y: auto;
    }
    .restaurant-card {
        display: flex;
        background-color: #fff;
        margin-bottom: 10px;
        padding: 10px;
        border-radius: 5px;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        cursor: pointer;
        align-items: center;
        position: relative;
    }
    .restaurant-card img {
        width: 100px;
        height: 100px;
        object-fit: cover;
        margin-right: 10px;
    }
    .restaurant-card .details {
        flex-grow: 1;
    }
    .restaurant-card .rating {
        color: #666;
    }
    .restaurant-card .promo {
        color: red;
        font-weight: bold;
    }
    /* Remove default button styling from heart button */
    .restaurant-card button {
        background: none;
        border: none;
        cursor: pointer;
        font-size: 20px;
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: transparent;
    }

    /* Modal styles */
    .modal {
        display: none; /* Hidden by default */
        position: fixed;
        z-index: 999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.5);
    }
    .modal-content {
        background-color: #fff;
        margin: 50px auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 600px;
        position: relative;
    }
    .close-btn {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
    }
    .menu-item {
        margin-bottom: 10px;
        cursor: pointer;
        padding: 8px;
        border: 1px solid #eee;
        border-radius: 4px;
        transition: background 0.2s;
    }
    .menu-item:hover {
        background-color: #f0f0f0;
    }
    .view-map-btn {
        display: inline-block;
        margin-top: 20px;
        padding: 10px 15px;
        background-color: #ff0000;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-decoration: none;
    }
    /* Food selection modal styles */
    .food-modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0,0,0,0.5);
    }
    .food-modal-content {
        background-color: #fff;
        margin: 50px auto;
        padding: 20px;
        border-radius: 10px;
        max-width: 400px;
        position: relative;
    }
    .food-close-btn {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 24px;
        font-weight: bold;
        cursor: pointer;
    }
    .food-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 10px;
        padding: 8px;
        border: 1px solid #eee;
        border-radius: 4px;
        cursor: pointer;
    }
    .food-item:hover {
        background-color: #f0f0f0;
    }
    .quantity-controls {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .quantity-btn {
        padding: 2px 8px;
        font-size: 18px;
        cursor: pointer;
        background-color: #ddd;
        border: none;
        border-radius: 4px;
    }
    .add-more-btn {
        margin-top: 20px;
        padding: 10px 15px;
        background-color: #f40404;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin-right: 10px;
    }
    .exit-btn {
        margin-top: 20px;
        padding: 10px 15px;
        background-color: #f40505;
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
    }

    /* Checkout page styles */
    #checkoutPage {
        display: none;
        padding: 20px;
        background: #fff;
        max-width: 600px;
        margin: auto;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        margin-top: 20px;
    }
    #checkoutPage h2, #checkoutPage h3 {
        margin-top: 0;
    }
    #checkoutItems {
        list-style: none;
        padding: 0;
        margin: 10px 0;
    }
    #checkoutItems li {
        margin-bottom: 8px;
    }
    /* Style for "Go to Checkout" button */
    #checkoutBtn {
        display: block;
        width: 100%;
        padding: 15px;
        background-color: #ff0000;
        color: white;
        font-size: 16px;
        font-weight: bold;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        margin-top: 10px;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        transition: background-color 0.3s;
    }
    #checkoutBtn:hover {
        background-color: #fb0404;
    }
    /* Confirm and Cancel buttons in checkout */
    .pay-btn {
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 20px;
    }
    .confirm-btn {
        background-color: #f90404;
        color: white;
    }
    .cancel-btn {
        background-color: #f40505;
        color: white;
        margin-left: 10px;
    }
</style>
</head>
<body>

<div class="header">
    <button>☰</button>
    <div>Crunch Time</div>
    <button>Delivery</button>
    <button>Pickup</button>
    <div class="search-bar">
        <input type="text" placeholder="Search Crunch Time ">
    </div>
    <button>Map Location - Pick up now</button>
</div>

<div class="filters">
    <button><img src="Images/Ultraprocessed foods display 2 framed - shutterstock_2137640529_r.jpg" alt="Fast Food"><span>Fast Food</span></button>
    <button><img src="Images/CR7 Veg .jpg" alt="Healthy"><span>Healthy</span></button>
    <button><img src="Images/CR7.jpg" alt="Burgers"><span>Burgers</span></button>
    <button><img src="Images/CR7 SUCCI.jpg" alt="Chinese"><span>Chinese</span></button>
    <button><img src="Images/CR7 WINGS.jpg" alt="Wings"><span>Wings</span></button>
    <button><img src="Images/CR7 PIZZA.webp" alt="Pizza"><span>Pizza</span></button>
    <button><img src="Images/CR7 SUCCI .webp" alt="Halal"><span>Halal</span></button>
    <button><img src="Images/CR7 KOREA .jpeg" alt="Korean"><span>Korean</span></button>
    <button>→</button>
</div>

<div class="restaurant-list">
    <div class="restaurant-card" onclick="showMenu('KFC Parow')">
        <img src="Images/RS KFC .jpeg" alt="KFC Parow" />
        <div class="details">
            <div>KFC, Parow</div>
            <div class="rating">4.4 ★</div>
            <div>Sponsored - 5 min - 4.4 km</div>
        </div>
        <button onclick="event.stopPropagation(); toggleFavorite(this)">♥</button>
    </div>
    <div class="restaurant-card" onclick="showMenu('Sannes Palace')">
        <img src="Images/RS PALACE .jpg" alt="Sannes Palace" />
        <div class="details">
            <div>Sannes Palace</div>
            <div class="rating">4.5 ★</div>
            <div class="promo">Spend ZAR 100, Save ZAR 15</div>
            <div>20 min - 0.5 km</div>
        </div>
        <button onclick="event.stopPropagation(); toggleFavorite(this)">♥</button>
    </div>
    <div class="restaurant-card" onclick="showMenu('DK Spot & Kota')">
        <img src="Images/RS KOTA .jpg" alt="DK Spot & Kota" />
        <div class="details">
            <div>DK Spot & Kota Restaurant</div>
            <div class="rating">4.0 ★</div>
            <div>Uber Eats HDP-Owned - 16 min - 0.6 km</div>
        </div>
        <button onclick="event.stopPropagation(); toggleFavorite(this)">♥</button>
    </div>
    <div class="restaurant-card" onclick="showMenu('Nondyebo Eatery')">
        <img src="Images/RS NONDYEBO.jpg" alt="Nondyebo Eatery" />
        <div class="details">
            <div>Nondyebo Eatery</div>
            <div class="rating">3.3 ★</div>
            <div>10 min - 0.6 km</div>
        </div>
        <button onclick="event.stopPropagation(); toggleFavorite(this)">♥</button>
    </div>
</div>

<!-- Modal for Menu -->
<div id="menuModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" onclick="closeModal()">&times;</span>
        <!-- Added image for restaurant -->
        <img id="restaurantImage" src="" alt="Restaurant Image" style="width:100%; max-height:200px; object-fit:cover; border-radius:5px; margin-bottom:10px;">
        <h2 id="restaurantName">Restaurant Menu</h2>
        <div id="menuItems">
            <!-- Menu items will be inserted here dynamically -->
        </div>
        <button class="view-map-btn" onclick="viewMap()">View Map Location</button>
    </div>
</div>

<!-- Food selection modal for adding items -->
<div id="foodModal" class="food-modal">
    <div class="food-modal-content">
        <span class="food-close-btn" onclick="closeFoodModal()">&times;</span>
        <h3 id="foodItemName">Food Item</h3>
        <div style="display:flex; align-items:center; justify-content:space-around; margin-top:10px;">
            <button class="quantity-btn" onclick="changeQuantity(-1)">-</button>
            <span id="foodQuantity">1</span>
            <button class="quantity-btn" onclick="changeQuantity(1)">+</button>
        </div>
        <div style="margin-top:20px; display:flex; justify-content:center;">
            <button class="add-more-btn" onclick="addItemToOrder()">Add More Items</button>
            <button class="exit-btn" onclick="closeFoodModal()">Exit</button>
        </div>
    </div>
</div>

<!-- Order Summary -->
<div id="orderSummary" style="padding:10px 20px; background:#fff; max-height:200px; overflow-y:auto; margin:10px;">
    <h4>Order Summary</h4>
    <ul id="orderItems"></ul>
    <!-- Add the Checkout Button here -->
    <button id="checkoutBtn" class="checkout-btn" onclick="goToCheckout()">Go to Checkout</button>
</div>

<!-- Checkout page (hidden initially) -->
<div id="checkoutPage">
    <h2>Checkout</h2>
    <h3>Order Summary</h3>
    <ul id="checkoutItems"></ul>
    <h3>Total: <span id="totalAmount">R0</span></h3>
    <h3>Payment Method</h3>
    <div style="margin-bottom:20px;">
        <input type="radio" id="eft" name="payment" value="EFT" checked>
        <label for="eft">EFT Bank Transfer</label>
    </div>
    <button class="pay-btn confirm-btn" onclick="confirmEFT()">Confirm EFT Payment</button>
    <button class="pay-btn cancel-btn" onclick="cancelCheckout()">Cancel</button>
</div>

<script>
    // Placeholder menu data
    const restaurantMenus = {
        "KFC Parow": [
            { name: "Zinger Burger", price: "R50" },
            { name: "Fries", price: "R20" },
            { name: "Cola", price: "R15" }
        ],
        "Sannes Palace": [
            { name: "Chicken Curry", price: "R80" },
            { name: "Veggie Plate", price: "R60" },
            { name: "Lemonade", price: "R10" }
        ],
        "DK Spot & Kota": [
            { name: "Kota Special", price: "R25" },
            { name: "Fries", price: "R20" },
            { name: "Soda", price: "R15" }
        ],
        "Nondyebo Eatery": [
            { name: "Wrap", price: "R40" },
            { name: "Salad", price: "R35" },
            { name: "Juice", price: "R12" }
        ]
    };

    let currentRestaurant = '';
    let selectedFoodItem = null; // For tracking clicked food item
    let currentQuantity = 1; // Default quantity
    let orderItems = []; // Array to hold ordered items

    function showMenu(restaurantName) {
        currentRestaurant = restaurantName;

        // Set the restaurant name
        document.getElementById('restaurantName').innerText = restaurantName + ' Menu';

        // Set the image based on the restaurant
        const imageElement = document.getElementById('restaurantImage');
        switch (restaurantName) {
            case 'KFC Parow':
                imageElement.src = 'Images/RS KFC .jpeg';
                break;
            case 'Sannes Palace':
                imageElement.src = 'Images/RS PALACE .jpg';
                break;
            case 'DK Spot & Kota':
                imageElement.src = 'Images/RS KOTA .jpg';
                break;
            case 'Nondyebo Eatery':
                imageElement.src = 'Images/RS NONDYEBO.jpg';
                break;
            default:
                imageElement.src = '';
        }

        // Populate menu items
        const menuDiv = document.getElementById('menuItems');
        menuDiv.innerHTML = '';
        const menuItems = restaurantMenus[restaurantName] || [];
        menuItems.forEach(item => {
            const div = document.createElement('div');
            div.className = 'menu-item';
            div.innerHTML = `<strong>${item.name}</strong> - ${item.price}`;
            div.onclick = () => {
                openFoodModal(item);
            };
            menuDiv.appendChild(div);
        });
        document.getElementById('menuModal').style.display = 'block';
    }

    function closeModal() {
        document.getElementById('menuModal').style.display = 'none';
    }

    function viewMap() {
        let url = '';
        switch (currentRestaurant) {
            case 'KFC Parow':
                url = 'https://www.google.com/maps/search/?api=1&query=KFC+Parow';
                break;
            case 'Sannes Palace':
                url = 'https://www.google.com/maps/search/?api=1&query=Sannes+Palace';
                break;
            case 'DK Spot & Kota':
                url = 'https://www.google.com/maps/search/?api=1&query=DK+Spot+Kota';
                break;
            case 'Nondyebo Eatery':
                url = 'https://www.google.com/maps/search/?api=1&query=Nondyebo+Eatery';
                break;
            default:
                url = 'https://www.google.com/maps';
        }
        window.open(url, '_blank');
    }

    window.onclick = function(event) {
        const modal = document.getElementById('menuModal');
        if (event.target == modal) {
            closeModal();
        }
        const foodModal = document.getElementById('foodModal');
        if (event.target == foodModal) {
            closeFoodModal();
        }
    }

    // Toggle favorite (heart button)
    function toggleFavorite(btn) {
        if (btn.innerText === '♥') {
            btn.innerText = '♡';
        } else {
            btn.innerText = '♥';
        }
    }

    // Food modal functions
    function openFoodModal(foodItem) {
        selectedFoodItem = foodItem;
        currentQuantity = 1;
        document.getElementById('foodItemName').innerText = foodItem.name;
        document.getElementById('foodQuantity').innerText = currentQuantity;
        document.getElementById('foodModal').style.display = 'block';
    }

    function closeFoodModal() {
        document.getElementById('foodModal').style.display = 'none';
    }

    function changeQuantity(delta) {
        currentQuantity += delta;
        if (currentQuantity < 1) currentQuantity = 1;
        document.getElementById('foodQuantity').innerText = currentQuantity;
    }

    function addItemToOrder() {
        if (selectedFoodItem) {
            orderItems.push({
                name: selectedFoodItem.name,
                price: selectedFoodItem.price,
                quantity: currentQuantity
            });
            updateOrderSummary();
        }
        closeFoodModal();
    }

    function updateOrderSummary() {
        const ul = document.getElementById('orderItems');
        ul.innerHTML = '';
        orderItems.forEach((item, index) => {
            const li = document.createElement('li');
            li.innerHTML = `${item.name} x${item.quantity} @ ${item.price} each`;
            // Remove button
            const removeBtn = document.createElement('button');
            removeBtn.innerText = 'Remove';
            removeBtn.style.marginLeft = '10px';
            removeBtn.onclick = () => {
                orderItems.splice(index, 1);
                updateOrderSummary();
            };
            li.appendChild(removeBtn);
            ul.appendChild(li);
        });
    }

    // Go to checkout
    function goToCheckout() {
        if (orderItems.length === 0) {
            alert("Your cart is empty!");
            return;
        }
        // Populate checkout items
        const ul = document.getElementById('checkoutItems');
        ul.innerHTML = '';
        let total = 0;
        orderItems.forEach(item => {
            const li = document.createElement('li');
            const priceNumber = parseFloat(item.price.replace('R', ''));
            total += priceNumber * item.quantity;
            li.innerHTML = `${item.name} x${item.quantity} @ ${item.price} each`;
            ul.appendChild(li);
        });
        document.getElementById('totalAmount').innerText = `R${total.toFixed(2)}`;
        // Show checkout page
        document.getElementById('checkoutPage').style.display = 'block';
        // Hide order summary
        document.querySelector('#orderSummary').style.display = 'none';
    }

    function cancelCheckout() {
        document.getElementById('checkoutPage').style.display = 'none';
        document.querySelector('#orderSummary').style.display = 'block';
    }

    function confirmEFT() {
        alert("Your EFT payment has been processed successfully. Thank you for your order!");
        // Clear cart
        orderItems = [];
        updateOrderSummary();
        // Hide checkout
        cancelCheckout();
    }
</script>

</body>
</html>