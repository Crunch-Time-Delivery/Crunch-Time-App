<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Admin</title>
<!-- Include Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: Arial, sans-serif; background:#f0f2f5; margin:0; padding-top:70px;
  }

  /* Top header with CRUNCHTIME */
  .top-header {
    width: 100%;
    background: #fff;
    padding: 10px 20px;
    font-weight: bold;
    font-size: 24px;
    color: red;
    text-align: center;
    border-bottom: 1px solid #ccc;
  }

  /* Fixed Header styles */
  .header {
    display:flex; justify-content:space-between; align-items:center;
    background:red; padding:10px 20px; color:#fff; position:fixed; top:0; width:100%; height:60px; z-index:1000; border-bottom:1px solid #ccc;
  }

  /* Styles for menu container and dropdown */
  .menu-container {
    position:relative;
  }
  #menuDropdown {
    display:none;
    position:absolute; top:100%; left:0; background:#fff; border:1px solid #ccc; padding:5px; box-shadow:0 2px 8px rgba(0,0,0,0.2);
    z-index: 1001;
  }
  #menuDropdown button {
    display:block; width:100%; padding:8px; border:none; background:none; cursor:pointer; text-align:left;
  }

  /* Profile section styles */
  .profile-section {
    display:flex; align-items:center; cursor:pointer; margin-left:auto;
  }
  #profileImage {
    border-radius:50%; width:40px; height:40px; object-fit:cover;
  }
  .admin-name {
    margin-left:10px;
  }

  /* Sections hidden/shown */
  .section { display:none; padding-top:70px; }
  .section.active { display:block; }

  /* Buttons styling */
  button {
    padding:8px 12px; border:none; border-radius:4px; cursor:pointer; margin:5px;
  }
  .btn-primary { background:#4CAF50; color:#fff; }
  .btn-primary:hover { background:#45a049; }

  /* Modal overlays for login, credential change, add admin */
  .modal {
    display:flex; align-items:center; justify-content:center;
    position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:9999;
  }
  .modal-box {
    background:#fff; padding:30px; border-radius:8px; width:400px; max-height:80%; overflow-y:auto;
  }

  /* Additional styling for dashboard elements */
  h2 { margin-bottom:10px; }

  /* Filter dropdown style */
  #filterDropdown {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: #fff;
    border: 1px solid #ccc;
    padding: 10px;
    z-index: 1002;
    width: 200px;
  }
  #filterDropdown button {
    display: block;
    width: 100%;
    padding: 8px;
    border: none;
    background: none;
    text-align: left;
    cursor: pointer;
  }
</style>
</head>
<body>

<!-- Login modal -->
<div id="loginModal" class="modal" style="display:flex;">
  <div class="modal-box">
    <h3>Admin Login</h3>
    <input type="text" id="username" placeholder="Username" style="width:100%; margin-bottom:10px; padding:8px;"/>
    <input type="password" id="password" placeholder="Password" style="width:100%; margin-bottom:10px; padding:8px;"/>
    <button style="width:100%;" onclick="verifyLogin()">Login</button>
  </div>
</div>

<!-- Credential change & add admin popup -->
<div id="adminPopup" class="modal" style="display:none;">
  <div class="modal-box" style="width:400px;">
    <h3>Admin Settings</h3>
    <div>
      <label>Change Username:</label>
      <input type="text" id="newUsername" style="width:100%; margin-bottom:10px;"/>
    </div>
    <div>
      <label>Change Password:</label>
      <input type="password" id="newPassword" style="width:100%; margin-bottom:10px;"/>
    </div>
    <button onclick="saveAdminCredentials()">Save Credentials</button>
    <hr style="margin:10px 0;"/>
    <h4>Add New Admin</h4>
    <div>
      <label>Email:</label>
      <input type="email" id="newAdminEmail" style="width:100%; margin-bottom:10px;"/>
    </div>
    <div>
      <label>Username:</label>
      <input type="text" id="newAdminUsername" style="width:100%; margin-bottom:10px;"/>
    </div>
    <div>
      <label>Password:</label>
      <input type="password" id="newAdminPassword" style="width:100%; margin-bottom:10px;"/>
    </div>
    <button onclick="addNewAdmin()">Add Admin</button>
    <button style="margin-top:10px; background:red; color:#fff; width:100%;" onclick="closeAdminPopup()">Close</button>
  </div>
</div>

<!-- Fixed Header -->
<div class="header">
  <!-- Menu -->
  <div class="menu-container">
    <div class="menu-icon" title="Menu" style="cursor:pointer; font-size:24px;" onclick="toggleMenuDropdown()">☰</div>
    <div id="menuDropdown">
      <button onclick="showSection('dashboard')">Dashboard</button>
      <button onclick="showSection('establishment')">Establishment</button>
      <button onclick="showSection('restaurant')">Restaurant Menu</button>
      <button onclick="showSection('Driver')">Driver</button>
      <button onclick="showSection('Vendor')">Vendor</button>
    </div>
  </div>
  <!-- Profile -->
  <div class="profile-section" style="display:flex; align-items:center; cursor:pointer;" onclick="triggerProfileImageUpload()">
    <img src="https://via.placeholder.com/40" id="profileImage" alt="Profile" />
    <input type="file" id="profileImageInput" accept="image/*" style="display:none;" onchange="updateProfileImage(event)">
    <div class="admin-name" id="adminName">Admin</div>
  </div>
</div>

<!-- Dashboard -->
<div id="dashboard" class="section active">
  <!-- Dashboard Chart Container -->
  <div>
    <div class="top-bar" style="margin-top:0;">
      <div class="profile-section">
        <div class="profile-picture"></div>
        <div class="admin-name">Admin Dashboard</div>
      </div>
      <div class="menu-icon" title="Menu">☰</div>
    </div>
    <div class="dashboard-container">
      <!-- Filters & Income -->
      <div style="display:flex; justify-content:space-between; align-items:center; padding:10px 20px 0 20px;">
        <!-- Filter Button & Dropdown -->
        <div style="position:relative;">
          <button onclick="toggleFilterDropdown()">Filter Establishments ▼</button>
          <div id="filterDropdown">
            <button onclick="filterEstablishments('All')">All</button>
            <button onclick="filterEstablishments('Type 1')">Type 1</button>
            <button onclick="filterEstablishments('Type 2')">Type 2</button>
            <!-- Add more filter options as needed -->
          </div>
        </div>
        <!-- Buttons for Income -->
        <div style="display:flex; gap:10px;">
          <button style="background-color:red; color:#fff;">Total Income</button>
          <button style="background-color:red; color:#fff;">Income</button>
          <button style="background-color:red; color:#fff;">Expense</button>
          <button style="background-color:red; color:#fff;">Withdraw</button>
        </div>
      </div>
      <!-- Total Income display -->
      <div style="margin-top:20px; padding-left:20px;">
        <h2>Total Income: R10,000</h2>
      </div>
      
      <!-- Performance -->
      <div class="performance-section" style="margin-top:20px; padding:0 20px;">
        <!-- Existing performance header ... (unchanged) -->
        <div class="performance-header" style="display:flex; justify-content:space-between; align-items:center;">
          <div style="display:flex; align-items:center; gap:10px;">
            <div class="performance-title" style="font-size:20px;font-weight:bold;">Performance</div>
            <div class="performance-icon" title="Performance" style="font-size:24px;">📈</div>
          </div>
          <!-- Year Dropdown -->
          <div class="year-dropdown" style="position:relative;">
            <button class="year-button" onclick="toggleYearDropdown()">January ▼</button>
            <div class="year-options" id="yearOptions" style="display:none; position:absolute; top:100%; right:0; background:#fff; border:1px solid #ccc; flex-direction:column; z-index:10;">
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('January')">January</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('February')">February</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('March')">March</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('April')">April</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('May')">May</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('June')">June</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('July')">July</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('August')">August</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('September')">September</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('October')">October</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('November')">November</div>
              <div style="padding:8px; cursor:pointer;" onclick="selectMonth('December')">December</div>
            </div>
          </div>
        </div>
        <!-- Boxes for Order Total & Target -->
        <div class="boxes-container" style="display:flex; gap:20px; margin-top:20px;">
          <!-- Order Total -->
          <div class="box" style="background:#fff; padding:15px; flex:1; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
            <div class="box-header" style="display:flex; align-items:center; margin-bottom:10px;">
              <div class="profile-icon" style="width:30px; height:30px; border-radius:50%; background:#ccc; margin-right:10px;"></div>
              <div class="box-title" style="font-weight:bold;">Order Total</div>
            </div>
            <div class="box-amount" style="font-size:20px;">$5000</div>
          </div>
          <!-- Target -->
          <div class="box" style="background:#fff; padding:15px; flex:1; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
            <div class="box-header" style="display:flex; align-items:center; margin-bottom:10px;">
              <div class="profile-icon" style="width:30px; height:30px; border-radius:50%; background:#ccc; margin-right:10px;"></div>
              <div class="box-title" style="font-weight:bold;">Target</div>
            </div>
            <div class="target-container" style="margin-top:10px;">
              <div class="linear-bar" style="height:10px; background:#ddd; border-radius:5px; overflow:hidden;">
                <div class="target-progress" style="width:75%; height:10px; background:#4caf50;"></div>
              </div>
              <div style="margin-top:10px;">Target: 75%</div>
            </div>
          </div>
        </div>
        <!-- Select Last Month & Last Year -->
        <div class="selection-row" style="display:flex; gap:20px; margin-top:20px;">
          <!-- Last Month -->
          <div class="select-box" style="flex:1;">
            <div class="select-header" style="display:flex; justify-content:space-between; align-items:center;">
              <h4>One This Month</h4>
              <div class="option-icon" title="Options" style="width:30px; height:30px; background:#eee; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer;">⋮</div>
            </div>
            <div>Number: 80</div>
            <div class="wave-graph" style="height:50px; background:#e0e0e0; margin-top:10px; border-radius:4px; display:flex; align-items:center; justify-content:center;">Wave Graph</div>
          </div>
          <!-- Last Year -->
          <div class="select-box" style="flex:1;">
            <div class="select-header" style="display:flex; justify-content:space-between; align-items:center;">
              <h4>One Last</h4>
              <div class="option-icon" title="Options" style="width:30px; height:30px; background:#eee; border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer;">⋮</div>
            </div>
            <div>Number: 70</div>
            <div class="wave-graph" style="height:50px; background:#e0e0e0; margin-top:10px; border-radius:4px; display:flex; align-items:center; justify-content:center;">Wave Graph</div>
          </div>
        </div>
        <!-- Bottom Order Stats -->
        <div class="stats" style="margin-top:30px;">
          <!-- Orders Complete -->
          <div class="stat-row" style="display:flex; align-items:center; margin-bottom:15px; position:relative;">
            <button class="stat-button" title="Orders Complete" style="position:fixed; left:10px; top:50%; transform:translateY(-50%); padding:8px 12px; background:red; color:#fff; border:none; border-radius:4px; cursor:pointer;">✓</button>
            <div class="stat-info" style="margin-left:50px;">Total Orders Complete: 120</div>
          </div>
          <!-- Orders Delivered -->
          <div class="stat-row" style="display:flex; align-items:center; margin-bottom:15px; position:relative;">
            <button class="stat-button" title="Orders Delivered" style="position:fixed; left:10px; top:50%; transform:translateY(-50%); padding:8px 12px; background:red; color:#fff; border:none; border-radius:4px; cursor:pointer;">✓</button>
            <div class="stat-info" style="margin-left:50px;">Total Orders Delivered: 100</div>
          </div>
          <!-- Orders Cancelled -->
          <div class="stat-row" style="display:flex; align-items:center; margin-bottom:15px; position:relative;">
            <button class="stat-button" title="Orders Cancelled" style="position:fixed; left:10px; top:50%; transform:translateY(-50%); padding:8px 12px; background:#f44336; color:#fff; border:none; border-radius:4px; cursor:pointer;">⚠</button>
            <div class="stat-info" style="margin-left:50px;">Total Orders Cancelled: 10</div>
          </div>
          <!-- Orders Pending -->
          <div class="stat-row" style="display:flex; align-items:center; margin-bottom:15px; position:relative;">
            <button class="stat-button" title="Orders Pending" style="position:fixed; left:10px; top:50%; transform:translateY(-50%); padding:8px 12px; background:#2196F3; color:#fff; border:none; border-radius:4px; cursor:pointer;">⏳</button>
            <div class="stat-info" style="margin-left:50px;">Orders Pending: 10</div>
          </div>
        </div>
        <!-- Popular Food -->
        <div class="popular-food" style="margin-top:30px;">
          <div class="food-header" style="font-size:20px; font-weight:bold; margin-bottom:10px;">Popular Food</div>
          <div class="circle-graph" style="width:200px; height:200px; background:#ddd; border-radius:50%; margin-bottom:20px; display:flex; align-items:center; justify-content:center; font-weight:bold;">Circle Graph</div>
          <!-- Food Types -->
          <div class="food-types" style="display:flex; flex-wrap:wrap; gap:15px;">
            <div class="food-item" style="display:flex; align-items:center; gap:10px;">
              <div class="food-color" style="width:20px; height:20px; border-radius:50%; background:#FF6384;"></div>
              <div>Fast Food - 40%</div>
            </div>
            <div class="food-item" style="display:flex; align-items:center; gap:10px;">
              <div class="food-color" style="width:20px; height:20px; border-radius:50%; background:#36A2EB;"></div>
              <div>Asian - 20%</div>
            </div>
            <div class="food-item" style="display:flex; align-items:center; gap:10px;">
              <div class="food-color" style="width:20px; height:20px; border-radius:50%; background:#FFCE56;"></div>
              <div>Pasta - 15%</div>
            </div>
            <div class="food-item" style="display:flex; align-items:center; gap:10px;">
              <div class="food-color" style="width:20px; height:20px; border-radius:50%; background:#4BC0C0;"></div>
              <div>Mexican - 10%</div>
            </div>
            <div class="food-item" style="display:flex; align-items:center; gap:10px;">
              <div class="food-color" style="width:20px; height:20px; border-radius:50%; background:#9966FF;"></div>
              <div>Turkish - 5%</div>
            </div>
            <div class="food-item" style="display:flex; align-items:center; gap:10px;">
              <div class="food-color" style="width:20px; height:20px; border-radius:50%; background:#FF9F40;"></div>
              <div>Desserts - 10%</div>
            </div>
          </div>
          <!-- Order Delivered Bar -->
          <div style="margin-top:20px; font-weight:bold;">Order Delivered</div>
          <div style="margin-top:10px;">
            <!-- Each food type bar -->
            <div style="margin-bottom:8px;">
              <div style="display:flex; justify-content:space-between;">
                <div>Fast Food</div><div>40%</div>
              </div>
              <div class="linear-bar" style="background:#ddd; height:10px; border-radius:5px; overflow:hidden;">
                <div style="width:40%; height:10px; background:#FF6384;"></div>
              </div>
            </div>
            <div style="margin-bottom:8px;">
              <div style="display:flex; justify-content:space-between;">
                <div>Asian</div><div>20%</div>
              </div>
              <div class="linear-bar" style="background:#ddd; height:10px; border-radius:5px; overflow:hidden;">
                <div style="width:20%; height:10px; background:#36A2EB;"></div>
              </div>
            </div>
            <div style="margin-bottom:8px;">
              <div style="display:flex; justify-content:space-between;">
                <div>Pasta</div><div>15%</div>
              </div>
              <div class="linear-bar" style="background:#ddd; height:10px; border-radius:5px; overflow:hidden;">
                <div style="width:15%; height:10px; background:#FFCE56;"></div>
              </div>
            </div>
            <div style="margin-bottom:8px;">
              <div style="display:flex; justify-content:space-between;">
                <div>Mexican</div><div>10%</div>
              </div>
              <div class="linear-bar" style="background:#ddd; height:10px; border-radius:5px; overflow:hidden;">
                <div style="width:10%; height:10px; background:#4BC0C0;"></div>
              </div>
            </div>
            <div style="margin-bottom:8px;">
              <div style="display:flex; justify-content:space-between;">
                <div>Turkish</div><div>5%</div>
              </div>
              <div class="linear-bar" style="background:#ddd; height:10px; border-radius:5px; overflow:hidden;">
                <div style="width:5%; height:10px; background:#9966FF;"></div>
              </div>
            </div>
            <div style="margin-bottom:8px;">
              <div style="display:flex; justify-content:space-between;">
                <div>Desserts</div><div>10%</div>
              </div>
              <div class="linear-bar" style="background:#ddd; height:10px; border-radius:5px; overflow:hidden;">
                <div style="width:10%; height:10px; background:#FF9F40;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- END Dashboard HTML -->
</div>

<!-- Establishment -->
<div id="establishment" class="section">
  <h2>Establishment Management</h2>
  <div style="padding:20px;">
    <div class="establishment-card">
      <h3>Sample Restaurant</h3>
      <p>Address: 123 Main St</p>
      <p>Contact: 555-1234</p>
    </div>
    <button onclick="addEstablishment()">Add Establishment</button>
  </div>
</div>

<!-- Restaurant -->
<div id="restaurant" class="section">
  <h2>Restaurant Menu</h2>
  <div id="restaurantContainer" style="padding:20px;">
    <!-- Dynamic restaurant entries -->
  </div>
  <button id="addRestaurantBtn" style="margin:20px; padding:10px 20px; background:red; color:#fff; border:none; border-radius:6px; cursor:pointer;">Add Restaurant</button>
</div>

<!-- Driver -->
<div id="Driver" class="section" style="padding-top:70px;">
  <h2 style="margin-left:20px;">Driver Info & Orders</h2>
  <div style="padding:20px;">
    <div class="driver-profile" style="display:flex; margin-bottom:20px;">
      <img src="https://via.placeholder.com/80" class="driver-img" alt="Driver" />
      <div class="driver-info" style="margin-left:10px;">
        <h4>John Doe</h4>
        <div class="driver-details">
          <p>Contact: 123-456-7890</p>
          <p>Plate: ABC-1234</p>
          <p>Email: john@example.com</p>
          <p>Ratings: 4.5 &#9733;</p>
          <p>Comments: Very punctual.</p>
        </div>
        <button class="hyperlink-red" onclick="showPastDeliveries('John Doe')">Past Deliveries</button>
        <button class="hyperlink-red" onclick="showDocuments('John Doe')">View Documents</button>
      </div>
    </div>
    <div class="driver-profile" style="display:flex; margin-bottom:20px;">
      <img src="https://via.placeholder.com/80" class="driver-img" alt="Driver" />
      <div class="driver-info" style="margin-left:10px;">
        <h4>Jane Smith</h4>
        <div class="driver-details">
          <p>Contact: 987-654-3210</p>
          <p>Plate: XYZ-5678</p>
          <p>Email: jane@example.com</p>
          <p>Ratings: 4.8 &#9733;</p>
          <p>Comments: Great driver.</p>
        </div>
        <button class="hyperlink-red" onclick="showPastDeliveries('Jane Smith')">Past Deliveries</button>
        <button class="hyperlink-red" onclick="showDocuments('Jane Smith')">View Documents</button>
      </div>
    </div>
  </div>
</div>

<!-- Vendor -->
<div id="Vendor" class="section" style="padding-top:70px;">
  <h2 style="margin-left:20px;">Vendor Management</h2>
  <div style="padding:20px;">
    <button onclick="showVendors()">Show All Vendors</button>
  </div>
</div>

<script>
  // Admin Credentials
  let adminUsername = 'crunchtimeadmin';
  let adminPassword = 'crunchtimeadmin12';

  // Utility functions
  function sendEmail(to, subject, body) {
    alert(`Simulated Email to ${to}:\nSubject: ${subject}\n${body}`);
  }
  function sendSMS(to, message) {
    alert(`Simulated SMS to ${to}:\n${message}`);
  }

  // Show section
  function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.style.display='none');
    document.getElementById(id).style.display='block';
  }

  // Toggle menu dropdown
  function toggleMenuDropdown() {
    const dd = document.getElementById('menuDropdown');
    dd.style.display = (dd.style.display==='block') ? 'none' : 'block';
  }
  document.addEventListener('click', e => {
    if (!e.target.closest('.menu-container')) {
      document.getElementById('menuDropdown').style.display='none';
    }
  });

  // Profile picture
  function triggerProfileImageUpload() { document.getElementById('profileImageInput').click(); }
  function updateProfileImage(e) {
    const file = e.target.files[0];
    if (file) {
      const reader=new FileReader();
      reader.onload=function(ev) { document.getElementById('profileImage').src=ev.target.result; }
      reader.readAsDataURL(file);
    }
  }

  // Login & Credentials
  function verifyLogin() {
    const u = document.getElementById('username').value.trim();
    const p = document.getElementById('password').value.trim();
    if (u===adminUsername && p===adminPassword) {
      alert('Login successful!');
      document.getElementById('loginModal').style.display='none';
      showAdminPopup();
      document.getElementById('adminName').innerText=adminUsername;
    } else {
      alert('Invalid credentials.');
    }
  }

  function showAdminPopup() { document.getElementById('adminPopup').style.display='flex'; }
  function closeAdminPopup() { document.getElementById('adminPopup').style.display='none'; }
  function saveAdminCredentials() {
    const newU = document.getElementById('newUsername').value.trim();
    const newP = document.getElementById('newPassword').value.trim();
    if (newU && newP) {
      adminUsername = newU;
      adminPassword = newP;
      sendEmail('crunchtimedrivein@gmail.com', 'Updated Admin Login', `New Admin Credentials:\nUsername: ${adminUsername}\nPassword: ${adminPassword}`);
      document.getElementById('adminName').innerText=adminUsername;
      alert('Credentials updated and email sent.');
    } else {
      alert('Please provide new credentials.');
    }
    closeAdminPopup();
  }

  // Add New Admin
  function addNewAdmin() {
    const email = document.getElementById('newAdminEmail').value.trim();
    const username = document.getElementById('newAdminUsername').value.trim();
    const password = document.getElementById('newAdminPassword').value.trim();
    if (email && username && password) {
      const recordText = `Admin Email: ${email}\nUsername: ${username}\nPassword: ${password}\n---\n`;
      sendEmail('crunchtimedrivein@gmail.com', 'New Admin Record', recordText);
      alert('New admin added and record sent.');
      document.getElementById('newAdminEmail').value='';
      document.getElementById('newAdminUsername').value='';
      document.getElementById('newAdminPassword').value='';
    } else {
      alert('Please fill all fields for new admin.');
    }
  }

  // Show section
  function showSection(id) { 
    document.querySelectorAll('.section').forEach(s => s.style.display='none');
    document.getElementById(id).style.display='block';
  }

  // Toggle filter dropdown
  function toggleFilterDropdown() {
    const el = document.getElementById('filterDropdown');
    el.style.display = (el.style.display==='block') ? 'none' : 'block';
  }
  function filterEstablishments(type) {
    alert('Filtering by: ' + type);
    document.getElementById('filterDropdown').style.display='none';
  }

  // Toggle year/month dropdown
  function toggleYearDropdown() {
    const el = document.getElementById('yearOptions');
    el.style.display = (el.style.display==='none' || el.style.display==='') ? 'block' : 'none';
  }
  function selectMonth(month) {
    document.querySelector('.year-button').innerText=month + ' ▼';
    document.getElementById('yearOptions').style.display='none';
  }

  // Initialize charts
  function initCharts() {
    // Wave Graphs
    const ctxWaveLastMonth = document.getElementById('waveGraphLastMonth')?.getContext('2d');
    if (ctxWaveLastMonth) {
      new Chart(ctxWaveLastMonth, {
        type:'line',
        data:{
          labels:['Week 1','Week 2','Week 3','Week 4'],
          datasets:[{
            label:'Last Month Data',
            data:[12,19,3,5],
            backgroundColor:'rgba(255,159,64,0.2)',
            borderColor:'rgba(255,159,64,1)',
            borderWidth:2,
            tension:0.4,
            fill:true,
          }]
        },
        options:{ responsive:true, plugins:{ legend:{ display:false } } }
      });
    }
    const ctxWaveLastYear = document.getElementById('waveGraphLastYear')?.getContext('2d');
    if (ctxWaveLastYear) {
      new Chart(ctxWaveLastYear, {
        type:'line',
        data:{
          labels:['Week 1','Week 2','Week 3','Week 4'],
          datasets:[{
            label:'Last Year Data',
            data:[8,14,6,9],
            backgroundColor:'rgba(153,102,255,0.2)',
            borderColor:'rgba(153,102,255,1)',
            borderWidth:2,
            tension:0.4,
            fill:true,
          }]
        },
        options:{ responsive:true, plugins:{ legend:{ display:false } } }
      });
    }
    // Circle Chart
    const ctxCircle = document.getElementById('circleChart')?.getContext('2d');
    if (ctxCircle) {
      new Chart(ctxCircle, {
        type:'doughnut',
        data:{
          labels:['Fast Food','Asian','Pasta','Mexican','Turkish','Desserts'],
          datasets:[{
            label:'Food Types',
            data:[40,20,15,10,5,10],
            backgroundColor:['#FF6384','#36A2EB','#FFCE56','#4BC0C0','#9966FF','#FF9F40'],
            hoverOffset:4
          }]
        },
        options:{
          responsive:true,
          plugins:{ legend:{ position:'bottom' } }
        }
      });
    }
  }

  // Create restaurant card
  function createRestaurantBox() {
    const container = document.getElementById('restaurantContainer');
    const box = document.createElement('div');
    box.className='restaurant-box';
    box.style.border='1px solid #ccc'; box.style.borderRadius='8px'; box.style.padding='10px'; box.style.marginBottom='10px'; box.style.display='flex'; box.style.alignItems='center';

    const img = document.createElement('img');
    img.src='https://via.placeholder.com/150';
    img.style.width='150px'; img.style.height='150px'; img.style.objectFit='cover'; img.style.borderRadius='8px';

    const details = document.createElement('div');
    details.style.display='flex'; details.style.flexDirection='column'; details.style.flex='1'; details.style.marginLeft='10px';

    const nameEl = document.createElement('h3');
    nameEl.contentEditable=true;
    nameEl.innerText='Restaurant Name';

    const linkEl = document.createElement('a');
    linkEl.href='#';
    linkEl.innerText='Restaurant Menu';
    linkEl.style.color='#007bff'; linkEl.style.textDecoration='underline';

    const btns = document.createElement('div');
    btns.style.display='flex'; btns.style.gap='10px'; btns.style.marginTop='10px';

    const editBtn = document.createElement('button');
    editBtn.innerHTML='✎'; editBtn.title='Edit';
    editBtn.onclick= ()=>{ nameEl.contentEditable=true; nameEl.focus(); };

    const removeBtn = document.createElement('button');
    removeBtn.innerHTML='×'; removeBtn.title='Remove';
    removeBtn.onclick= ()=>{ container.removeChild(box); };

    btns.appendChild(editBtn);
    btns.appendChild(removeBtn);
    details.appendChild(nameEl);
    details.appendChild(linkEl);
    details.appendChild(btns);
    box.appendChild(img);
    box.appendChild(details);
    container.appendChild(box);
  }

  // Buttons functions
  function showVendors() { alert('Display all vendors with accept/reject options and history.'); }
  function addEstablishment() {
    const estDiv = document.createElement('div');
    estDiv.className='establishment-card';
    estDiv.innerHTML= `
      <h3>New Establishment</h3>
      <p>Address: New Address</p>
      <p>Contact: New Contact</p>
    `;
    document.querySelector('#establishment div').appendChild(estDiv);
  }
  function showPastDeliveries(driverName) { alert('Showing past deliveries for ' + driverName); }
  function showDocuments(driverName) { alert('Showing documents for ' + driverName); }

  document.getElementById('addRestaurantBtn')?.addEventListener('click', () => { createRestaurantBox(); });

  // Toggle filter dropdown
  function toggleFilterDropdown() {
    const el = document.getElementById('filterDropdown');
    el.style.display = (el.style.display==='block') ? 'none' : 'block';
  }
  function filterEstablishments(type) {
    alert('Filtering by: ' + type);
    document.getElementById('filterDropdown').style.display='none';
  }

  // Initialize dashboard charts on window load
  window.onload = () => {
    initCharts();
    createRestaurantBox();
  };
</script>
</body>
</html>