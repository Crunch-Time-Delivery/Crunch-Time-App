<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Welcome Page</title>
<!-- Font Awesome -->
<script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
<style>
  body { font-family: sans-serif; background:#f0f0f0; margin:0; }

  /* Welcome overlay styles */
  #welcomeOverlay {
    position: fixed;
    top:0; left:0; width:100%; height:100%;
    background: rgba(255, 255, 255, 0.8);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    z-index:10000;
    text-align: center;
    padding:20px;
  }
  #welcomeOverlay img {
    max-width:250px;
    margin-bottom:20px;
  }
  #welcomeOverlay h2 {
    color: gray;
    margin: 10px 0;
  }
  #welcomeOverlay p {
    margin:10px 0;
  }
  /* Buttons in overlay */
  .centered-buttons {
    display:flex;
    flex-direction:column;
    align-items:center;
  }
  .centered-buttons button {
    width:200px;
    padding:12px;
    margin:10px 0;
    font-size:1em;
    cursor:pointer;
    border-radius:4px;
    border:none;
  }
  /* Specific overlay buttons */
  .btn-create {
    background:#f60202; /* red background */
    color:#fff;
  }
  .btn-login {
    background:#fff; /* white background */
    color:#f60202; /* red text */
  }
  .btn-browser {
    background:#f60202; /* red background */
    color:#fff; /* white text */
  }
  /* Terms text */
  #termsText {
    margin-top:20px;
    text-align:center;
    font-size:0.9em;
    color: #555;
  }
</style>
</head>
<body>

<!-- Welcome Overlay -->
<div id="welcomeOverlay">
  <img src="img/screenshot (253).jpg" alt="Screenshot" />
  <h2>Welcome</h2>
  <p>Before enjoying CrunchTime deliveries</p>
  <p>Register now</p>
  <div class="centered-buttons">
    <button id="registerModal " class="btn-create" onclick="handleCreateAccount()">Create account</button>
    <button id="otpModal " class="btn-login" onclick="handleLogin()">Login</button>
    <button id="loginModal "  class="btn-browser" onclick="window.location.href='dummy.html';">Browser Menu</button>
  </div>
  <div id="termsText">
    By logging in or registering, you have agreed to the Terms and Conditions and Privacy Policy.
  </div>
</div>

<!-- Register Modal -->
<div id="registerModal" class="modal" style="display:none;">
  <div class="modal-box">
    <img src="img/screenshot (253).jpg" alt="Welcome Image" style="width:250px; height:auto; margin-bottom:20px;">
    <h2 style="color:gray;">Welcome</h2>
    <h3>Register New Vendor</h3>
    <input type="email" id="regEmail" placeholder="Invitation Email" />
    <input type="text" id="regName" placeholder="Full Name" />
    <input type="password" id="regPassword" placeholder="Password" />
    <button style="width:100%; background:#fa0202; color:#fff;" onclick="startRegistration()">Create Account</button>
  </div>
</div>

<!-- OTP Modal -->
<div id="otpModal" class="modal" style="display:none;">
  <div class="modal-box">
    <img src="img/screenshot (253).jpg" alt="Welcome Image" style="width:250px; height:auto; margin-bottom:20px;">
    <h3>Verify Account</h3>
    <p>Please enter the OTP sent to your email to verify your account</p>
    <p>Enter your OTP code here</p>
    <input id="otpInput" placeholder="OTP" />
    <p>Didnâ€™t receive code? Request again</p>
    <button style="width:100%; background:#f80202; color:#fff;" onclick="verifyOTP()">Confirm</button>
  </div>
</div>

<!-- Login Modal -->
<div id="loginModal" class="modal" style="display:none;">
  <div class="modal-box">
    <img src="img/screenshot (253).jpg" alt="Welcome Image" style="width:250px; height:auto; margin-bottom:20px;">
    <h3>Welcome</h3>
    <p>For vendors Manage your orders in real time. </p>
    <label>Email Address</label>
    <input id="username" placeholder="Username" />
    <label>Password</label>
    <input id="password" placeholder="Password" type="password" />
    <button style="width:100%; background:#f40101; color:#fff;" onclick="verifyLogin()">Login</button>
    <p>Don't have an account? Register here</p>
  </div>
</div>

<script>
let tempAdminData = {};
let generatedOTP = '';

function handleCreateAccount() {
  document.getElementById('welcomeOverlay').style.display='none';
  showRegistration();
}
function handleLogin() {
  document.getElementById('welcomeOverlay').style.display='none';
  showLogin();
}
function showRegistration() {
  document.querySelectorAll('.section').forEach(s=>s.style.display='none');
  document.getElementById('loginModal').style.display='none';
  document.getElementById('registerModal').style.display='none';
  document.getElementById('otpModal').style.display='none';
}
function showLogin() {
  document.querySelectorAll('.section').forEach(s=>s.style.display='none');
  document.getElementById('loginModal').style.display='flex';
  document.getElementById('username').value='';
  document.getElementById('password').value='';
}

function startRegistration() {
  const email = document.getElementById('regEmail').value.trim();
  const name = document.getElementById('regName').value.trim();
  const pass = document.getElementById('regPassword').value.trim();
  if (!email || !name || !pass) { alert('Fill all fields'); return; }
  tempAdminData = { email, name, pass };
  generatedOTP = Math.floor(100000 + Math.random() * 900000).toString();
  alert('Your OTP: ' + generatedOTP);
  document.getElementById('registerModal').style.display='none';
  document.getElementById('otpModal').style.display='flex';
  document.getElementById('otpInput').value = '';
}

function verifyOTP() {
  const inputOTP = document.getElementById('otpInput').value.trim();
  if (inputOTP === generatedOTP) {
    alert('OTP verified! Registration complete.');
    localStorage.setItem('vendorEmail', tempAdminData.email);
    localStorage.setItem('vendorPassword', tempAdminData.pass);
    localStorage.setItem('vendorLoggedIn', 'true');
    document.getElementById('otpModal').style.display='none';

    // Redirect to your app page
    window.location.href = "http://127.0.0.1:5500/vendor-app/index.html";
  } else {
    alert('Incorrect OTP');
  }
}

function verifyLogin() {
  const username = document.getElementById('username').value.trim();
  const pass = document.getElementById('password').value.trim();
  const storedEmail = localStorage.getItem('vendorEmail');
  const storedPass = localStorage.getItem('vendorPassword');
  if (!storedEmail || !storedPass) { alert('Register first'); return; }
  if (username === storedEmail && pass === storedPass) {
    alert('Logged in');
    localStorage.setItem('vendorLoggedIn', 'true');
    document.getElementById('loginModal').style.display='none';

    // Redirect after login
    window.location.href = "http://127.0.0.1:5500/vendor-app/index.html";
  } else {
    alert('Invalid');
  }
}
</script>
</body>
</html>